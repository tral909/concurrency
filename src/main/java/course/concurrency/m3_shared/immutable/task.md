Практика: рефакторинг
Задание на проверку
Обязательное
Вы работаете над системой для интернет-магазина. Заказы поступают через сайт, оплачиваются через платёжный шлюз и
собираются на складе. Всё это разные сервисы.

Cервис OrderService принимает новые заказы, информацию об оплате и готовности заказа. Когда все части на месте, передаёт
заказ сервису доставки:

![449.png](..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2FDownloads%2F449.png)

Для каждого заказа доставка должна произойти один раз!

Задание: сделать рефакторинг классов Order и OrderService с использованием неизменяемых переменных.

Формальные требования:

Класс Order - неизменяемый

Методы OrderService не используют критические секции

Методами ConcurrentHashMap можно пользоваться, но не запихивать туда всю логику

Входные и выходные параметры методов OrderService не меняются
Важный момент 1: должно использоваться свойство неизменяемости. Чтобы смотришь на код и думаешь: "хорошо, что переменные
immutable, с изменяемыми такое написать не получилось бы".

Для простоты предполагаем, что методы updatePaymentInfo и setPacked не вызываются после доставки

К сожалению, на этом учебном примере сложно понять преимущества функционального подхода. Здесь хорошей производительности
можно достичь и с помощью изменяемых переменных. Так что просто потренируемся писать код чуть по-другому:)